const a59_0x1fd57b=a59_0x1197;(function(_0x54e173,_0x2df2d3){const _0x72bfa1=a59_0x1197,_0x247536=_0x54e173();while(!![]){try{const _0x29ecb7=-parseInt(_0x72bfa1(0x76))/0x1*(parseInt(_0x72bfa1(0x6c))/0x2)+-parseInt(_0x72bfa1(0x72))/0x3+parseInt(_0x72bfa1(0xe7))/0x4+parseInt(_0x72bfa1(0xc6))/0x5*(-parseInt(_0x72bfa1(0xbb))/0x6)+-parseInt(_0x72bfa1(0xad))/0x7+-parseInt(_0x72bfa1(0xe2))/0x8*(parseInt(_0x72bfa1(0xc4))/0x9)+-parseInt(_0x72bfa1(0x9e))/0xa*(-parseInt(_0x72bfa1(0xab))/0xb);if(_0x29ecb7===_0x2df2d3)break;else _0x247536['push'](_0x247536['shift']());}catch(_0x70ebf){_0x247536['push'](_0x247536['shift']());}}}(a59_0x48e2,0xa5e8a));const path=require('path'),{commandRepository}=require('./autoHealHelper'),constants=require('../../bin/utils/constants'),logger=require(a59_0x1fd57b(0xd7))[a59_0x1fd57b(0x8f)],globals=require(a59_0x1fd57b(0x80)),timeoutPromise=require(a59_0x1fd57b(0xb8)),isUndefinedOrNull=_0x54a760=>_0x54a760===undefined||_0x54a760===null||_0x54a760==='',isNotUndefinedOrNull=_0x282572=>!isUndefinedOrNull(_0x282572),isString=_0x4be8fa=>isNotUndefinedOrNull(_0x4be8fa)&&typeof _0x4be8fa===a59_0x1fd57b(0xa0);class AiSdkWrapper{constructor(){const _0x5c7936=a59_0x1fd57b,_0x49dd18={'qGXDn':function(_0x29ceec,_0x137f3b){return _0x29ceec(_0x137f3b);},'jZQDh':_0x5c7936(0x8a)};this[_0x5c7936(0xb4)]=undefined;try{this['BrowserstackHealing']=_0x49dd18[_0x5c7936(0x95)](require,path[_0x5c7936(0x9c)](__dirname,_0x49dd18[_0x5c7936(0x7f)]));}catch(_0x558171){logger[_0x5c7936(0x9d)]('Unable\x20to\x20load\x20healing\x20module,\x20error:\x20'+(_0x558171&&_0x558171[_0x5c7936(0xdb)]?_0x558171['message']:''));}}[a59_0x1fd57b(0x87)](_0x9ac808){const _0xda38dd=a59_0x1fd57b,_0x4d8230={};_0x4d8230[_0xda38dd(0xbc)]=_0xda38dd(0xe0),_0x4d8230[_0xda38dd(0xe4)]=function(_0x188fb0,_0x33f45b){return _0x188fb0===_0x33f45b;},_0x4d8230[_0xda38dd(0x96)]='chrome',_0x4d8230[_0xda38dd(0xa3)]=_0xda38dd(0x7b),_0x4d8230['nOAWp']=_0xda38dd(0x75),_0x4d8230['JSUvi']=function(_0x4be701,_0x1054e7){return _0x4be701===_0x1054e7;},_0x4d8230[_0xda38dd(0xbd)]=_0xda38dd(0xe1),_0x4d8230[_0xda38dd(0xc3)]=function(_0x27ed7b,_0x25d2e8){return _0x27ed7b===_0x25d2e8;},_0x4d8230[_0xda38dd(0xcd)]=_0xda38dd(0x86),_0x4d8230[_0xda38dd(0xa1)]=function(_0x4a600b,_0x247149){return _0x4a600b===_0x247149;};const _0xab0a4a=_0x4d8230;try{const _0x54767a=this[_0xda38dd(0xb4)][_0xda38dd(0xdc)](Object[_0xda38dd(0xb1)](_0x9ac808[_0xda38dd(0xc2)]()[_0xda38dd(0xd3)]));console[_0xda38dd(0x88)](_0xab0a4a[_0xda38dd(0xbc)],_0x54767a);if(_0xab0a4a[_0xda38dd(0xe4)](_0x54767a?.[_0xda38dd(0xba)]?.['toLowerCase'](),_0xab0a4a[_0xda38dd(0x96)]))_0x9ac808[_0xda38dd(0xbe)]=_0x54767a;else{if(_0xab0a4a[_0xda38dd(0xe4)](_0x54767a?.[_0xda38dd(0xba)]?.[_0xda38dd(0x6f)](),_0xab0a4a[_0xda38dd(0xa3)]))_0x9ac808[_0xda38dd(0x82)]=_0x54767a;else{if(_0xab0a4a[_0xda38dd(0xe4)](_0x54767a?.[_0xda38dd(0xba)]?.[_0xda38dd(0x6f)](),_0xab0a4a[_0xda38dd(0xe8)]))_0x9ac808['safariOptions_']=_0x54767a;else{if(_0xab0a4a[_0xda38dd(0xd9)](_0x54767a?.[_0xda38dd(0xba)]?.['toLowerCase'](),_0xab0a4a[_0xda38dd(0xbd)])||_0xab0a4a['xsbYb'](_0x54767a?.[_0xda38dd(0xba)]?.['toLowerCase'](),_0xab0a4a[_0xda38dd(0xcd)]))_0x9ac808['edgeOptions_']=_0x54767a;else _0xab0a4a['DbKZZ'](_0x54767a?.[_0xda38dd(0xba)]?.['toLowerCase'](),'ie')&&(_0x9ac808[_0xda38dd(0x8d)]=_0x54767a);}}}Object[_0xda38dd(0x71)](_0x54767a)[_0xda38dd(0xa5)](_0x49da76=>{const _0x5d5ca9=_0xda38dd,_0x5338cc=_0x9ac808['capabilities_']['get'](_0x49da76);_0x9ac808[_0x5d5ca9(0x81)][_0x5d5ca9(0xa8)](_0x49da76,_0x54767a[_0x49da76]);});}catch(_0x3d658e){logger[_0xda38dd(0x9d)](_0xda38dd(0xcc)+(_0x3d658e&&_0x3d658e[_0xda38dd(0xdb)]?_0x3d658e[_0xda38dd(0xdb)]:''));}}async[a59_0x1fd57b(0xac)](_0x396926){const _0x3b4c8b=a59_0x1fd57b,_0x48504e={'bCTXk':function(_0x1d0545,_0x233b92,_0x458fd6,_0x46b07c,_0x4292e1,_0x3ac129,_0x2eb951){return _0x1d0545(_0x233b92,_0x458fd6,_0x46b07c,_0x4292e1,_0x3ac129,_0x2eb951);},'ytYJU':'BrowserstackHealing.setToken\x20method\x20timed\x20out','kwsBA':_0x3b4c8b(0x6a),'cRIbs':_0x3b4c8b(0xc5)},_0x46ce55=new Date(),_0x11448d=_0x48504e[_0x3b4c8b(0xc1)](timeoutPromise,constants[_0x3b4c8b(0x6b)],_0x48504e[_0x3b4c8b(0x84)],_0x48504e[_0x3b4c8b(0x8b)],_0x46ce55,this[_0x3b4c8b(0xae)],this['framework']);await Promise['race']([this[_0x3b4c8b(0xb4)][_0x3b4c8b(0x7a)](_0x396926,globals[_0x3b4c8b(0x89)](_0x48504e[_0x3b4c8b(0xde)]),constants['TCG_URL'])[_0x3b4c8b(0xa2)](()=>{const _0x3c4f09=_0x3b4c8b;_0x11448d[_0x3c4f09(0x92)]();}),_0x11448d]);}async['_handleEvent'](_0x581f,_0x72dc99,_0x385ece,_0x161367){const _0x237229=a59_0x1fd57b,_0x4672d5={'dIkRz':function(_0x2e9c34,_0x21a687){return _0x2e9c34===_0x21a687;},'zdqgO':function(_0x1bfcd6,_0x4cae96){return _0x1bfcd6===_0x4cae96;},'aldYS':function(_0x1080c1,_0x27ed97){return _0x1080c1(_0x27ed97);},'QdLlt':function(_0x82a09f,_0x5cd7e7){return _0x82a09f(_0x5cd7e7);},'prKKm':function(_0x3ec1c6,_0x33689c){return _0x3ec1c6(_0x33689c);},'QoNsp':function(_0xd28674,_0x658e53){return _0xd28674(_0x658e53);},'FCzly':function(_0x30e441,_0x4504dc){return _0x30e441(_0x4504dc);},'hwEhB':function(_0xe96594,_0x51df96){return _0xe96594(_0x51df96);},'czBRA':function(_0x36c7e0,_0x3b047d){return _0x36c7e0(_0x3b047d);},'ESfqi':function(_0x5cc745,_0x580a63){return _0x5cc745(_0x580a63);},'qIaXP':_0x237229(0xd4),'DFsGe':_0x237229(0x74),'vYpqR':_0x237229(0xd2),'CqJAC':'aiHeal_isGroupAIEnabled','DXxgW':function(_0x2cc0af,_0xf215de,_0x463ea7,_0x458841,_0x52d4dd,_0x38ef4e,_0x442970){return _0x2cc0af(_0xf215de,_0x463ea7,_0x458841,_0x52d4dd,_0x38ef4e,_0x442970);},'KZrqL':_0x237229(0x93),'EIAEr':_0x237229(0xb7),'IBGMP':_0x237229(0x90),'Ytfac':_0x237229(0xd0)},_0x58c66d=(await _0x72dc99[_0x237229(0xb0)]())[_0x237229(0x91)]();let _0x56bec3='';if(commandRepository['isSelfHealEnabled']()&&_0x4672d5[_0x237229(0xe6)](_0x161367,![])||_0x4672d5[_0x237229(0x78)](_0x161367,!![])){const _0xc484b1=_0x4672d5['aldYS'](isNotUndefinedOrNull,_0x385ece[_0x237229(0xea)]['using'])&&_0x4672d5[_0x237229(0xca)](isString,_0x385ece['parameters_']['using'])?_0x385ece[_0x237229(0xea)][_0x237229(0x70)][_0x237229(0xc7)](/'/g,'\x5c\x27')[_0x237229(0xc7)](/"/g,'\x5c\x22'):'',_0x4a0203=_0x4672d5[_0x237229(0xca)](isNotUndefinedOrNull,_0x385ece[_0x237229(0xea)][_0x237229(0x70)])&&_0x4672d5[_0x237229(0xda)](isString,_0x385ece[_0x237229(0xea)]['value'])?_0x385ece[_0x237229(0xea)]['value'][_0x237229(0xc7)](/'/g,'\x5c\x27')[_0x237229(0xc7)](/"/g,'\x5c\x22'):'',_0x3a439e=_0x4672d5[_0x237229(0xb5)](isNotUndefinedOrNull,commandRepository[_0x237229(0x97)]())&&_0x4672d5[_0x237229(0x9b)](isString,commandRepository[_0x237229(0x97)]())?commandRepository[_0x237229(0x97)]()['replace'](/'/g,'\x5c\x27')[_0x237229(0xc7)](/"/g,'\x5c\x22'):'';let _0x3ab483=_0x4672d5[_0x237229(0xc9)](isNotUndefinedOrNull,global[_0x237229(0xd1)])&&_0x4672d5[_0x237229(0xcb)](isString,global[_0x237229(0xd1)])?global[_0x237229(0xd1)]['replace'](/'/g,'\x5c\x27')[_0x237229(0xc7)](/"/g,'\x5c\x22'):'';!_0x3ab483&&(_0x3ab483=_0x4672d5['ESfqi'](isNotUndefinedOrNull,commandRepository[_0x237229(0x79)]())&&_0x4672d5[_0x237229(0xb6)](isString,commandRepository[_0x237229(0x79)]())?commandRepository[_0x237229(0x79)]()['replace'](/'/g,'\x5c\x27')[_0x237229(0xc7)](/"/g,'\x5c\x22'):'');let _0x4f2ea9='{\x22region\x22:\x20\x22'+constants['TCG_REGION']+_0x237229(0x99)+constants[_0x237229(0xaa)]+_0x237229(0x98)+constants['TCG_URL']['split'](_0x4672d5[_0x237229(0x73)])[0x1]+_0x237229(0x83);_0x4f2ea9=_0x4672d5[_0x237229(0xda)](isNotUndefinedOrNull,_0x4f2ea9)&&_0x4672d5[_0x237229(0xc9)](isString,_0x4f2ea9)?_0x4f2ea9[_0x237229(0xc7)](/'/g,'\x5c\x27')[_0x237229(0xc7)](/"/g,'\x5c\x22'):'';const _0x4cd45a=commandRepository[_0x237229(0xcf)](_0x58c66d),_0x344406=globals[_0x237229(0x89)](_0x4672d5[_0x237229(0xdf)]),_0x19c26d=globals[_0x237229(0x89)](_0x4672d5[_0x237229(0xe9)]),_0x503d50=globals[_0x237229(0x89)](_0x4672d5[_0x237229(0xce)]),_0x264001=![],_0x51cc80=new Date();if(_0x161367){const _0x38fb55=_0x4672d5['DXxgW'](timeoutPromise,constants['HEALING_LOG_DATA_TIMEOUT'],_0x4672d5[_0x237229(0x8e)],_0x4672d5[_0x237229(0xd6)],_0x51cc80,this[_0x237229(0xae)],this[_0x237229(0x6d)]);_0x56bec3=await Promise[_0x237229(0xb3)]([this['BrowserstackHealing'][_0x237229(0x8c)](_0xc484b1,_0x4a0203,_0x3a439e,_0x3ab483,_0x19c26d,_0x58c66d,_0x4cd45a,_0x4f2ea9)[_0x237229(0xa2)](_0x1f03d2=>{const _0x147f37=_0x237229;return _0x38fb55[_0x147f37(0x92)](),_0x1f03d2;}),_0x38fb55]);}else{if(commandRepository[_0x237229(0x9f)]()){const _0x9c5fe8=_0x4672d5[_0x237229(0xd5)](timeoutPromise,constants[_0x237229(0xa9)],_0x4672d5[_0x237229(0x7d)],_0x4672d5[_0x237229(0xe3)],_0x51cc80,this['config'],this[_0x237229(0x6d)]);_0x56bec3=await Promise[_0x237229(0xb3)]([this[_0x237229(0xb4)]['healFailure'](_0xc484b1,_0x4a0203,_0x3a439e,_0x3ab483,_0x344406,_0x19c26d,_0x58c66d,_0x4cd45a,_0x264001,_0x503d50,_0x4f2ea9)[_0x237229(0xa2)](_0xa4e257=>{const _0x1e5573=_0x237229;return _0x9c5fe8[_0x1e5573(0x92)](),_0xa4e257;}),_0x9c5fe8]);}}_0x56bec3&&await _0x72dc99['executeScript'](_0x56bec3);}}async['handleSuccess'](_0x5e6ae5,_0x1a545a,_0x2464c9){const _0x21202d=a59_0x1fd57b;try{await this[_0x21202d(0x6e)](_0x5e6ae5,_0x1a545a,_0x2464c9,!![]);}catch(_0x399ee1){return logger[_0x21202d(0x9d)](_0x21202d(0xd8)+(_0x399ee1&&_0x399ee1[_0x21202d(0xdb)]?_0x399ee1[_0x21202d(0xdb)]:'')),![];}return!![];}async[a59_0x1fd57b(0xc0)](_0x41e4df,_0x5dc0e5,_0x4a29bd){const _0x45bd64=a59_0x1fd57b,_0x1fd560={'YcWqz':function(_0x4410c9,_0x596b5a,_0x595ffd,_0x4252c8,_0x118d5c,_0x1847d4,_0x204d45){return _0x4410c9(_0x596b5a,_0x595ffd,_0x4252c8,_0x118d5c,_0x1847d4,_0x204d45);},'TSLlb':_0x45bd64(0x7e),'ktzua':'BrowserstackHealingPollResultFailed','LHwKL':'aiHeal_sessionToken'};try{await this[_0x45bd64(0x6e)](_0x41e4df,_0x5dc0e5,_0x4a29bd,![]);const _0x280a8d=(await _0x5dc0e5[_0x45bd64(0xb0)]())[_0x45bd64(0x91)](),_0x32f253=new Date(),_0x1a53f6=_0x1fd560['YcWqz'](timeoutPromise,constants[_0x45bd64(0x9a)],_0x1fd560[_0x45bd64(0x7c)],_0x1fd560[_0x45bd64(0xb9)],_0x32f253,this['config'],this[_0x45bd64(0x6d)]),_0x318975=await Promise[_0x45bd64(0xb3)]([this[_0x45bd64(0xb4)]['pollResult'](constants[_0x45bd64(0x85)],_0x280a8d,globals[_0x45bd64(0x89)](_0x1fd560[_0x45bd64(0x77)]))[_0x45bd64(0xa2)](_0x53e0ca=>{const _0x691b36=_0x45bd64;return _0x1a53f6[_0x691b36(0x92)](),_0x53e0ca;}),_0x1a53f6]);if(_0x318975&&_0x318975[_0x45bd64(0xbf)]&&_0x318975[_0x45bd64(0xc8)]){const _0x5e34ea={};return _0x5e34ea[_0x45bd64(0xb2)]=_0x318975[_0x45bd64(0xbf)],_0x5e34ea[_0x45bd64(0xe5)]=_0x318975[_0x45bd64(0xc8)],_0x5e34ea[_0x45bd64(0xa4)]=!![],_0x5e34ea;}const _0x41de58={};return _0x41de58[_0x45bd64(0xb2)]=_0x4a29bd[_0x45bd64(0xea)][_0x45bd64(0x70)],_0x41de58[_0x45bd64(0xe5)]=_0x318975[_0x45bd64(0xc8)],_0x41de58['aiHealing']=!![],_0x41de58;}catch(_0x3d055f){return logger[_0x45bd64(0xa7)]('Error\x20in\x20(healing)\x20handling\x20failure\x20event.\x20ERROR:\x20'+(_0x3d055f&&_0x3d055f[_0x45bd64(0xdb)]?_0x3d055f['message']:'')),logger[_0x45bd64(0xdd)]('Healing\x20Failed,\x20Browserstack\x20AI\x20could\x20not\x20heal\x20the\x20'+_0x4a29bd['name_']+_0x45bd64(0x94)),_0x4a29bd;}}}function a59_0x1197(_0x1ad7c2,_0xa63ce8){const _0x48e2a2=a59_0x48e2();return a59_0x1197=function(_0x119719,_0x2c8b37){_0x119719=_0x119719-0x6a;let _0x33f33d=_0x48e2a2[_0x119719];return _0x33f33d;},a59_0x1197(_0x1ad7c2,_0xa63ce8);}function a59_0x48e2(){const _0x1fcef3=['../globals','capabilities_','firefoxOptions_','\x22}}}','ytYJU','TCG_URL','microsoftedge','initializeHealingCapabilities','log','getGlobal','../../ai-sdk-node/bundle','kwsBA','logData','ieOptions_','KZrqL','winstonLogger','BrowserstackHealing.healFailure\x20method\x20timed\x20out','getId','cancel','BrowserstackHealing.logData\x20method\x20timed\x20out','\x20command','qGXDn','ViNcE','getProjectName','\x22:\x20{\x22endpoint\x22:\x20\x22','\x22,\x20\x22tcgUrls\x22:\x20{\x22','POLL_HEALING_RESULT_TIMEOUT','FCzly','join','error','3590CaAnBR','isSelfHealEnabled','string','DbKZZ','then','VLULv','aiHealing','forEach','freeze','debug','set','HEALING_FAILURE_TIMEOUT','TCG_REGION','87527EyqNfB','setTcgToken','9221996CDNYxx','config','aiSdkWrapper','getSession','fromEntries','locatorType','race','BrowserstackHealing','QoNsp','aldYS','BrowserstackHealingLogDataFailed','../../helpers/timeoutPromise','ktzua','browserName','6hyKwgc','YYwve','utXan','chromeOptions_','selector','handleFailure','bCTXk','getCapabilities','xsbYb','208701VxpXCB','aiHeal_sessionToken','2099465xVgrdM','replace','value','hwEhB','QdLlt','czBRA','Error\x20in\x20initialising\x20healing\x20capabilities\x20,\x20error:\x20','pbfkA','CqJAC','getCommands','BrowserstackHealingHealFailureFailed','browserstackSessionName','aiHeal_groupId','map_','s://','DXxgW','EIAEr','../logger','Error\x20in\x20(healing)\x20success\x20event.\x20ERROR:\x20','JSUvi','prKKm','message','initializeCapabilities','info','cRIbs','DFsGe','newCapabilities','edge','144SLlEWY','Ytfac','uNDZK','locatorValue','dIkRz','1674740ysmwcq','nOAWp','vYpqR','parameters_','BrowserstackHealingSetTcgTokenFailed','SET_TCG_TOKEN_TIMEOUT','4OCgVgq','framework','_handleEvent','toLowerCase','using','keys','1264335tFOJCL','qIaXP','aiHeal_userId','safari','9759uKbscO','LHwKL','zdqgO','getTestName','setToken','firefox','TSLlb','IBGMP','BrowserstackHealing.pollResult\x20method\x20timed\x20out','jZQDh'];a59_0x48e2=function(){return _0x1fcef3;};return a59_0x48e2();}exports[a59_0x1fd57b(0xaf)]=Object[a59_0x1fd57b(0xa6)](new AiSdkWrapper());