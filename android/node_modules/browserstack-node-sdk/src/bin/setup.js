#!/usr/bin/env node

const a45_0x14a0a0=a45_0x59a4;(function(_0x278486,_0x4edead){const _0x4d1a65=a45_0x59a4,_0x153782=_0x278486();while(!![]){try{const _0xd177c5=parseInt(_0x4d1a65(0x108))/0x1+-parseInt(_0x4d1a65(0x111))/0x2+-parseInt(_0x4d1a65(0x114))/0x3+parseInt(_0x4d1a65(0xf1))/0x4+-parseInt(_0x4d1a65(0x106))/0x5+parseInt(_0x4d1a65(0x115))/0x6*(parseInt(_0x4d1a65(0xff))/0x7)+-parseInt(_0x4d1a65(0xe3))/0x8*(-parseInt(_0x4d1a65(0xe1))/0x9);if(_0xd177c5===_0x4edead)break;else _0x153782['push'](_0x153782['shift']());}catch(_0x40e0e0){_0x153782['push'](_0x153782['shift']());}}}(a45_0x529f,0x211a5));const fs=require('fs'),helper=require(a45_0x14a0a0(0xe0)),utilities=require('../helpers/utilities'),yaml=require(a45_0x14a0a0(0xe5)),yargs=require(a45_0x14a0a0(0xef)),logger=require(a45_0x14a0a0(0xfc))[a45_0x14a0a0(0x11c)],configFileTemplate=__dirname+a45_0x14a0a0(0x10d),configFileTemplatePW=__dirname+'/../../browserstack.pw.yml.sample',configFile=process[a45_0x14a0a0(0xdf)]()+a45_0x14a0a0(0xde),packageFile=process[a45_0x14a0a0(0xdf)]()+a45_0x14a0a0(0xda),frameworks=['mocha','jest','cucumber-js','node',a45_0x14a0a0(0xfb),'codeceptjs',a45_0x14a0a0(0xe8)];let config;logger[a45_0x14a0a0(0xf9)](a45_0x14a0a0(0xe7)),createConfigurationFile(yargs[a45_0x14a0a0(0xfa)]['username'],yargs[a45_0x14a0a0(0xfa)][a45_0x14a0a0(0xf7)],yargs[a45_0x14a0a0(0xfa)]['playwright']);function a45_0x529f(){const _0xc36894=['includes','161700NzSvbN','entries','CWAXq','451479sbfntV','7338XnRavO','fireFunnelTestEvent','ftMgN','SDKSetup','scripts','length','IZVQY','winstonLogger','replace','qEtgi','/package.json','writeFileSync','vGEyB','CJOLd','/browserstack.yml','cwd','../helpers/helper','36GsdyYC','browserstack-node-sdk\x20','24184JCmhxF','YOUR_ACCESS_KEY','js-yaml','-browserstack','Creating\x20configuration\x20file...','playwright','NFUhK','npm\x20update\x20browserstack-node-sdk','YOUR_USERNAME','CDLKC','error','Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20','yargs','indexOf','186424cYwAtZ','RWAOr','XbUrH','postinstall','node-setup','push','key','qCZCk','info','argv','nightwatch','../helpers/logger','debug','readFileSync','1022EpmJVA','UOgYi','\x20&&\x20npm\x20update\x20browserstack-node-sdk','xCSYq','browserstack-node-sdk','debdd','source','381015foAQpG','Adding\x20new\x20script(s)\x20in\x20package.json...','205879AiEmfb','join','stringify','utf8','SJarq','/../../browserstack.yml.sample','dzIiS','VLIMs'];a45_0x529f=function(){return _0xc36894;};return a45_0x529f();}function a45_0x59a4(_0x541297,_0x232d01){const _0x529f42=a45_0x529f();return a45_0x59a4=function(_0x59a4bc,_0xe9d78){_0x59a4bc=_0x59a4bc-0xda;let _0x52fd90=_0x529f42[_0x59a4bc];return _0x52fd90;},a45_0x59a4(_0x541297,_0x232d01);}try{sdkSetup();}catch(a45_0x29645b){logger[a45_0x14a0a0(0xfd)](a45_0x14a0a0(0xee)+a45_0x29645b);}addScriptInPackageJson();function createConfigurationFile(_0x2e7e5d,_0x2a2496,_0x2c5290=![]){const _0x588c2f=a45_0x14a0a0,_0x220fea={};_0x220fea['xWzvs']=_0x588c2f(0x10b),_0x220fea[_0x588c2f(0x117)]=_0x588c2f(0xeb),_0x220fea[_0x588c2f(0x10f)]=_0x588c2f(0xe4);const _0x2f110c=_0x220fea;try{let _0x3668b7=fs[_0x588c2f(0xfe)](_0x2c5290?configFileTemplatePW:configFileTemplate,_0x2f110c['xWzvs']);_0x2e7e5d&&(_0x3668b7=_0x3668b7['replace'](_0x2f110c['ftMgN'],_0x2e7e5d)),_0x2a2496&&(_0x3668b7=_0x3668b7[_0x588c2f(0x11d)](_0x2f110c[_0x588c2f(0x10f)],_0x2a2496)),config=yaml['load'](_0x3668b7),fs[_0x588c2f(0xdb)](configFile,_0x3668b7,_0x437bce=>{const _0x559606=_0x588c2f;_0x437bce&&logger[_0x559606(0xed)](_0x437bce);});}catch(_0x26e9f1){logger[_0x588c2f(0xed)](_0x26e9f1);}}function addPostInstallScript(_0x452a4f,_0x34bdd6){const _0x316fa8=a45_0x14a0a0,_0x5e1309={};_0x5e1309['vGEyB']=_0x316fa8(0xf4),_0x5e1309[_0x316fa8(0x104)]=_0x316fa8(0xea),_0x5e1309[_0x316fa8(0x11e)]=_0x316fa8(0x101);const _0x3a5a21=_0x5e1309;let _0x529618=_0x452a4f[_0x3a5a21[_0x316fa8(0xdc)]];if(_0x529618&&_0x529618[_0x316fa8(0x110)](_0x3a5a21[_0x316fa8(0x104)]))return;!_0x529618?_0x529618=_0x3a5a21[_0x316fa8(0x104)]:_0x529618+=_0x3a5a21[_0x316fa8(0x11e)],_0x34bdd6[_0x316fa8(0xf6)]([_0x3a5a21['vGEyB'],_0x529618]);}function addScriptInPackageJson(){const _0x108f29=a45_0x14a0a0,_0x1f0171={'qxMOl':'utf8','CDLKC':function(_0x3e1b8b,_0x333dd2){return _0x3e1b8b<_0x333dd2;},'xCSYq':function(_0x47b546,_0x517524,_0x44a7bf){return _0x47b546(_0x517524,_0x44a7bf);},'dzIiS':function(_0x4a173d,_0x1d2620,_0x5a2244){return _0x4a173d(_0x1d2620,_0x5a2244);},'XbUrH':function(_0x2ec07a,_0x20f623){return _0x2ec07a!==_0x20f623;},'IZVQY':_0x108f29(0x107)},_0x1284e7=JSON['parse'](fs[_0x108f29(0xfe)](packageFile,_0x1f0171['qxMOl'])),_0x116eef=[];for(let _0x565a84=0x0;_0x1f0171[_0x108f29(0xec)](_0x565a84,frameworks[_0x108f29(0x11a)]);_0x565a84+=0x1){const _0x5bbe0d=_0x1f0171[_0x108f29(0x102)](findScriptsWithFramework,_0x1284e7[_0x108f29(0x119)],frameworks[_0x565a84]);for(let _0x5c5d85=0x0;_0x1f0171[_0x108f29(0xec)](_0x5c5d85,_0x5bbe0d[_0x108f29(0x11a)]);_0x5c5d85+=0x1){_0x116eef[_0x108f29(0xf6)](_0x1f0171[_0x108f29(0x102)](getUpdatedCommand,_0x1284e7[_0x108f29(0x119)],_0x5bbe0d[_0x5c5d85]));}_0x1f0171[_0x108f29(0x10e)](addPostInstallScript,_0x1284e7[_0x108f29(0x119)],_0x116eef);}const _0x1d6b9a={..._0x1284e7['scripts']},_0x5e27d5=_0x1d6b9a;for(let _0x5a1cee=0x0;_0x1f0171[_0x108f29(0xec)](_0x5a1cee,_0x116eef[_0x108f29(0x11a)]);_0x5a1cee+=0x1){_0x5e27d5[_0x116eef[_0x5a1cee][0x0]]=_0x116eef[_0x5a1cee][0x1];}_0x1f0171[_0x108f29(0xf3)](JSON[_0x108f29(0x10a)](_0x1284e7[_0x108f29(0x119)]),JSON[_0x108f29(0x10a)](_0x5e27d5))&&(logger[_0x108f29(0xf9)](_0x1f0171[_0x108f29(0x11b)]),_0x1284e7[_0x108f29(0x119)]=_0x5e27d5,fs[_0x108f29(0xdb)](packageFile,JSON[_0x108f29(0x10a)](_0x1284e7,null,0x2),_0x25340f=>{const _0x196dcf=_0x108f29;_0x25340f&&logger[_0x196dcf(0xed)](_0x25340f);}));};function findScriptsWithFramework(_0x5b6e5a,_0x54e64d){const _0x3bffa0=a45_0x14a0a0,_0x50ac7b={};_0x50ac7b[_0x3bffa0(0xf2)]=function(_0x4476dc,_0x36eb1c){return _0x4476dc<_0x36eb1c;},_0x50ac7b['UOgYi']=_0x3bffa0(0x103);const _0x5cc2a0=_0x50ac7b,_0x52b04a=[],_0x2fb561=Object[_0x3bffa0(0x112)](_0x5b6e5a);for(let _0x208205=0x0;_0x5cc2a0['RWAOr'](_0x208205,_0x2fb561[_0x3bffa0(0x11a)]);_0x208205+=0x1){_0x2fb561[_0x208205][0x1][_0x3bffa0(0x110)](_0x54e64d)&&!_0x2fb561[_0x208205][0x1]['includes'](_0x5cc2a0[_0x3bffa0(0x100)])&&_0x52b04a['push'](_0x2fb561[_0x208205][0x0]);}return _0x52b04a;}function getUpdatedCommand(_0x3dc196,_0x3b8626){const _0x27fca0=a45_0x14a0a0,_0x512233={};_0x512233[_0x27fca0(0xe9)]=function(_0x1e07f1,_0x2028d6){return _0x1e07f1!==_0x2028d6;},_0x512233[_0x27fca0(0xdd)]=_0x27fca0(0x103),_0x512233[_0x27fca0(0x113)]=function(_0x598933,_0x1c65af){return _0x598933===_0x1c65af;};const _0xab313d=_0x512233,_0x130d24=_0x3b8626+_0x27fca0(0xe6),_0x25905a=_0x3dc196[_0x3b8626],_0x2b22fa=_0x25905a['split']('\x20');for(const _0x4f7e6e of frameworks){if(_0xab313d[_0x27fca0(0xe9)](_0x2b22fa[_0x27fca0(0xf0)](_0x4f7e6e),-0x1)){_0x2b22fa['splice'](_0x2b22fa[_0x27fca0(0xf0)](_0x4f7e6e),0x0,_0xab313d['CJOLd']);break;}}let _0x48058e=_0x2b22fa[_0x27fca0(0x109)]('\x20');return _0xab313d['CWAXq'](_0x48058e,_0x25905a)&&(_0x48058e=_0x27fca0(0xe2)+_0x25905a),[_0x130d24,_0x48058e];}function sdkSetup(){const _0x547277=a45_0x14a0a0,_0x59757b={};_0x59757b[_0x547277(0x10c)]=_0x547277(0xf5),_0x59757b['qCZCk']=_0x547277(0x118);const _0x401fc1=_0x59757b;if(helper['isUndefined'](config))return;config[_0x547277(0x105)]=_0x401fc1[_0x547277(0x10c)];try{utilities[_0x547277(0x116)](_0x401fc1[_0x547277(0xf8)],{},config,'');}catch(_0xd50b32){logger[_0x547277(0xfd)]('Error\x20in\x20Fire\x20SDKSetup.\x20Stacktrace:\x20'+_0xd50b32);}}logger['info']('Setup\x20completed');