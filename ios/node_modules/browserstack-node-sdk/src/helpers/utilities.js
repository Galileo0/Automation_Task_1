const a90_0x2e96eb=a90_0x4784;(function(_0x1fd7e7,_0x13198e){const _0x552170=a90_0x4784,_0x57435e=_0x1fd7e7();while(!![]){try{const _0x16e08a=parseInt(_0x552170(0x227))/0x1+parseInt(_0x552170(0x1d1))/0x2*(parseInt(_0x552170(0x231))/0x3)+parseInt(_0x552170(0x230))/0x4*(parseInt(_0x552170(0x1bc))/0x5)+parseInt(_0x552170(0x1be))/0x6*(-parseInt(_0x552170(0x1f0))/0x7)+parseInt(_0x552170(0x229))/0x8+parseInt(_0x552170(0x236))/0x9+-parseInt(_0x552170(0x21b))/0xa;if(_0x16e08a===_0x13198e)break;else _0x57435e['push'](_0x57435e['shift']());}catch(_0x16f08a){_0x57435e['push'](_0x57435e['shift']());}}}(a90_0x2d5f,0x9ae77));const os=require('os'),util=require('util'),{getProductMap}=require(a90_0x2e96eb(0x21c)),logger=require('./logger')[a90_0x2e96eb(0x1c5)],constants=require('../bin/utils/constants'),testHubConstants=require(a90_0x2e96eb(0x20d)),{getTransformPath}=require(a90_0x2e96eb(0x1c4)),{FUNNEL_INSTRUMENTATION_API_URL}=require(a90_0x2e96eb(0x1ea)),{generateCIArtifacts,printNudgeLocalNotSetError}=require(a90_0x2e96eb(0x222)),PerformanceTester=require('./performance-tester'),globals=require(a90_0x2e96eb(0x1cd)),{isTurboScaleSession}=require(a90_0x2e96eb(0x1c3)),helper=require(a90_0x2e96eb(0x222)),{isTestObservabilitySession}=require('./test-observability/utils');let unhandledErrors='';function a90_0x2d5f(){const _0x58ec27=['selenium-webdriver','vgOGh','all','globalException','77964opAyLN','1677708wrcqvN','getSessionsList','pvDRk','Error\x20while\x20parsing\x20tests\x20errors,\x20Exception:\x20','XaZOY','9067275etyDVF','getTurboScaleBuildLink','content-type','AUTOMATE','application/json','175eEwqwW','Wzbhf','678DTxFag','every','version','sdkRunId','cTcGp','./ats/helper','../bin/playwright/reporter/pwUtils','winstonLogger','unknown','API\x20Event\x20','measures','YVulK','VujoF','ENV_VAR','fireFunnelTestEvent','./globals','deviceName','osVersion','reduce','4tgLdVr','SDKTestSuccessful','tests','killSignal','env','HrSFW','push','browser','exceptions','apply','join','getPackageVersion','stringify','debug','Jndyx','getBuildLink','browserStackConfig','BtKIB','Firing\x20SDK\x20event\x20for\x20funnel\x20data:\x20','ZeIfF','FZDBD','Something\x20went\x20wrong\x20in\x20Final\x20Execution\x20step\x20:\x20','IDkDy','YaJHl','forEach','../bin/utils/constants','MJIpl','codeceptjs','OUZHd','getAccessKey','CahIE','37394APvdEW','keys','GObqR','type','\x20:\x20','length','values','nodeRequest','BROWSERSTACK_TESTHUB_UUID','source','eNoCp','sanitizeBrowserStackConfig','Nbyft','getUserName','app','oOPWO','stopPercy','finishedMetadata','FfeIK','APP_AUTOMATE_PRODUCTS','iOhFi','yYWMQ','playwrightVersion','ZJeEN','isBrowserstackInfra','hostname','nodejs','HJeGB','body','../helpers/testhub/constants','config','framework','assign','getOptimalHubUrl','parse','FUNNEL_INSTRUMENTATION_API_URL','EcawT','kyOxK','buildName','object','error','\x20response\x20-\x20','KNtUU','30733490oKThGq','./testhub/utils','requirePWModule','format','notifyUpdate','HOTIF','split','./helper','_buildHashedId','finalExecution','event_properties','PRODUCT_IF_NOT_BROWSERSTACK_INFRA','814768XUWjsb','getTurboScaleSessionsList','5508656TBxWCo','Error\x20in\x20getting\x20framework\x20version\x20to\x20:\x20','RcvpV'];a90_0x2d5f=function(){return _0x58ec27;};return a90_0x2d5f();}function a90_0x4784(_0x2ee413,_0x5478b1){const _0x2d5fdb=a90_0x2d5f();return a90_0x4784=function(_0x478400,_0x51b4e4){_0x478400=_0x478400-0x1b8;let _0x51aa8c=_0x2d5fdb[_0x478400];return _0x51aa8c;},a90_0x4784(_0x2ee413,_0x5478b1);}exports[a90_0x2e96eb(0x1cc)]=async(_0x126f96,_0x970a0d={},_0x14718d,_0x2701f5)=>{const _0x16fdd1=a90_0x2e96eb,_0x159a1a={'BtKIB':function(_0xdf27a9,_0xee931e){return _0xdf27a9===_0xee931e;},'siWOv':_0x16fdd1(0x217),'yYWMQ':function(_0x391e2d,_0x158f01){return _0x391e2d>_0x158f01;},'YaJHl':_0x16fdd1(0x1d3),'OUZHd':function(_0x39a09a){return _0x39a09a();},'kyOxK':function(_0x570f21){return _0x570f21();},'ZJeEN':function(_0xdf51ca,_0x5bd551){return _0xdf51ca==_0x5bd551;},'Gnsmo':'null','Wzbhf':function(_0x4d26ae,_0xc8e3a5){return _0x4d26ae===_0xc8e3a5;},'Jndyx':'undefined','xIajT':function(_0xb950e7,_0x1466fc){return _0xb950e7>_0x1466fc;},'EcawT':_0x16fdd1(0x1ec),'CahIE':function(_0x2c6b60,_0x464d7a){return _0x2c6b60>_0x464d7a;},'VujoF':function(_0x515b61,_0x4591ae){return _0x515b61!==_0x4591ae;},'vgOGh':'Playwright','HrSFW':_0x16fdd1(0x218),'iOhFi':function(_0xb90247,_0x41df29){return _0xb90247+_0x41df29;},'omsKu':_0x16fdd1(0x234),'FZDBD':_0x16fdd1(0x223),'oOPWO':function(_0x599ee1,_0x56a2b6){return _0x599ee1(_0x56a2b6);},'IDkDy':function(_0x2013ae,_0x1edf1d){return _0x2013ae(_0x1edf1d);},'MJIpl':_0x16fdd1(0x1c6),'HOTIF':_0x16fdd1(0x20a),'qFlOz':function(_0x4a221f,_0x5428d2){return _0x4a221f===_0x5428d2;},'Nbyft':_0x16fdd1(0x1d2),'ZeIfF':function(_0x53d410,_0x3ced0a){return _0x53d410===_0x3ced0a;},'XaZOY':_0x16fdd1(0x22c),'pvDRk':_0x16fdd1(0x1bb),'RcvpV':'POST'};let _0x322ecd=[];if(helper['isBrowserstackInfra']()&&_0x159a1a[_0x16fdd1(0x1ed)](isTestObservabilitySession))_0x322ecd=_0x14718d[_0x16fdd1(0x1fe)]?constants[_0x16fdd1(0x203)]:constants['AUTOMATE_PRODUCTS'];else{if(_0x159a1a[_0x16fdd1(0x215)](isTestObservabilitySession))_0x322ecd=constants[_0x16fdd1(0x226)];else helper[_0x16fdd1(0x208)]()&&(_0x322ecd=_0x14718d['app']?constants['APP_AUTOMATE']:constants[_0x16fdd1(0x1ba)]);}let _0x497dd1=_0x14718d['buildIdentifier'];if(_0x159a1a[_0x16fdd1(0x207)](_0x497dd1,null))_0x497dd1=_0x159a1a['Gnsmo'];else _0x159a1a[_0x16fdd1(0x1bd)](_0x497dd1,undefined)&&(_0x497dd1=_0x159a1a[_0x16fdd1(0x1df)]);unhandledErrors&&_0x159a1a['xIajT'](unhandledErrors['length'],0x0)&&(_0x970a0d[_0x16fdd1(0x22f)]=unhandledErrors);global[_0x16fdd1(0x1c1)]&&(_0x970a0d[_0x16fdd1(0x1c1)]=global[_0x16fdd1(0x1c1)]);try{if(_0x970a0d[_0x16fdd1(0x218)]){if(_0x159a1a[_0x16fdd1(0x1bd)](_0x2701f5,_0x159a1a[_0x16fdd1(0x214)])&&_0x159a1a[_0x16fdd1(0x1ef)](_0x970a0d[_0x16fdd1(0x218)][_0x16fdd1(0x1f5)],0x0)){const _0x308dc7={};_0x308dc7['os']='',_0x308dc7[_0x16fdd1(0x1cf)]='',_0x308dc7[_0x16fdd1(0x1d8)]='',_0x308dc7['browserVersion']='';const _0x372666=_0x308dc7;let _0x554618={};const _0x50f29a=_0x970a0d[_0x16fdd1(0x218)];_0x554618=_0x50f29a[_0x16fdd1(0x1d0)]((_0x10a315,_0x12a7a0)=>{for(const _0x5ec8a3 in _0x12a7a0){_0x10a315[_0x5ec8a3]=_0x12a7a0[_0x5ec8a3];}return _0x10a315;},{});const _0x5118f6={};_0x5118f6[_0x16fdd1(0x1d3)]=_0x554618,_0x970a0d['error']=[Object['assign']({},_0x372666,_0x5118f6)];}else{let _0x40368=0x0;const _0x139ce2=_0x159a1a[_0x16fdd1(0x1ca)](_0x2701f5,_0x159a1a[_0x16fdd1(0x22d)])?JSON[_0x16fdd1(0x212)](_0x970a0d[_0x16fdd1(0x218)]):_0x970a0d['error'],_0x193bb5=Object[_0x16fdd1(0x1f6)](_0x139ce2);_0x193bb5[_0x16fdd1(0x1e9)](_0x361ae7=>{const _0x205318=_0x16fdd1;if(_0x159a1a[_0x205318(0x1e2)](typeof _0x361ae7,_0x159a1a['siWOv'])){const _0x34b7ab=Object[_0x205318(0x1f6)](_0x361ae7);!_0x34b7ab[_0x205318(0x1bf)](_0x389e9a=>_0x389e9a===null||_0x389e9a===undefined||_0x389e9a==='')&&(_0x40368+=0x1);}});if(_0x159a1a[_0x16fdd1(0x1e2)](_0x40368,0x0))delete _0x970a0d[_0x159a1a[_0x16fdd1(0x1d6)]];else{const _0x5d42b1=[];Object['keys'](_0x139ce2)[_0x16fdd1(0x1e9)](_0x413349=>{const _0x24d117=_0x16fdd1,_0x57703a={'FfeIK':function(_0x4e6ab8,_0x5b1202){const _0x9074e2=a90_0x4784;return _0x159a1a[_0x9074e2(0x205)](_0x4e6ab8,_0x5b1202);}},[_0x3cfc36,_0x4a8efd,_0x1ae54b,_0x4cd47f]=_0x413349[_0x24d117(0x221)](',\x20');let _0x1aaea5={};if(!_0x4cd47f){const _0x265bff={};_0x265bff[_0x24d117(0x1ce)]=_0x3cfc36,_0x265bff[_0x24d117(0x1cf)]=_0x4a8efd,_0x265bff[_0x24d117(0x1d8)]=_0x1ae54b,_0x1aaea5=_0x265bff;}else{const _0x528fa7={};_0x528fa7['os']=_0x3cfc36,_0x528fa7[_0x24d117(0x1cf)]=_0x4a8efd,_0x528fa7[_0x24d117(0x1d8)]=_0x1ae54b,_0x528fa7['browserVersion']=_0x4cd47f,_0x1aaea5=_0x528fa7;}const _0x38b4e5={},_0x543f48=_0x139ce2[_0x413349];Object[_0x24d117(0x1f1)](_0x543f48)[_0x24d117(0x1e9)](_0x503b25=>{const _0x19f950=_0x24d117;_0x57703a[_0x19f950(0x202)](_0x543f48[_0x503b25][_0x19f950(0x1f5)],0x0)&&(_0x38b4e5[_0x503b25]=_0x543f48[_0x503b25]);}),_0x159a1a[_0x24d117(0x205)](Object['keys'](_0x38b4e5)[_0x24d117(0x1f5)],0x0)&&(_0x1aaea5[_0x159a1a[_0x24d117(0x1e8)]]=_0x38b4e5,_0x5d42b1[_0x24d117(0x1d7)](_0x1aaea5));}),_0x159a1a[_0x16fdd1(0x205)](_0x5d42b1['length'],0x0)?_0x970a0d[_0x16fdd1(0x218)]=_0x5d42b1:delete _0x970a0d[_0x159a1a[_0x16fdd1(0x1d6)]];}}}}catch(_0x533c66){delete _0x970a0d[_0x159a1a[_0x16fdd1(0x1d6)]],logger[_0x16fdd1(0x1de)](_0x159a1a[_0x16fdd1(0x204)](_0x159a1a['omsKu'],_0x533c66));}const _0x5e43cb={'userName':helper[_0x16fdd1(0x1fd)](_0x14718d),'accessKey':helper[_0x16fdd1(0x1ee)](_0x14718d),'event_type':_0x126f96,'detectedFramework':_0x2701f5,'buildHashedId':globals['getGlobal'](_0x159a1a[_0x16fdd1(0x1e5)]),'optimalHubUrl':helper[_0x16fdd1(0x211)](),'event_properties':{'testhub_uuid':process[_0x16fdd1(0x1d5)][testHubConstants[_0x16fdd1(0x1cb)][_0x16fdd1(0x1f8)]]||'','product_map':_0x159a1a[_0x16fdd1(0x1ff)](getProductMap,_0x14718d),'productMap':_0x159a1a[_0x16fdd1(0x1e7)](getProductMap,_0x14718d),'language_framework':_0x14718d[_0x16fdd1(0x1f9)]||_0x159a1a['MJIpl'],'referrer':helper['getNodeAgent'](_0x2701f5),'frameworkVersion':helper['getFrameworkVersion'](_0x2701f5),'language':_0x159a1a[_0x16fdd1(0x220)],'product':_0x322ecd,'languageVersion':process[_0x16fdd1(0x1c0)],'buildName':_0x14718d[_0x16fdd1(0x216)]||_0x159a1a['Jndyx'],'buildIdentifier':_0x497dd1,'os':os[_0x16fdd1(0x1f3)]()||_0x159a1a['MJIpl'],'hostname':os[_0x16fdd1(0x209)]()||_0x159a1a[_0x16fdd1(0x1eb)],..._0x970a0d}};try{_0x159a1a['qFlOz'](_0x126f96,_0x159a1a[_0x16fdd1(0x1fc)])&&(_0x5e43cb[_0x16fdd1(0x225)][_0x16fdd1(0x1e1)]=helper[_0x16fdd1(0x1fb)](_0x14718d)),_0x159a1a[_0x16fdd1(0x1e4)](_0x2701f5,_0x159a1a[_0x16fdd1(0x22d)])?_0x5e43cb['event_properties'][_0x16fdd1(0x206)]=helper[_0x16fdd1(0x21d)][_0x16fdd1(0x1da)](null,_0x159a1a['kyOxK'](getTransformPath),!![]):_0x5e43cb[_0x16fdd1(0x225)]['seleniumVersion']=helper[_0x16fdd1(0x1dc)](_0x159a1a[_0x16fdd1(0x235)]);}catch(_0x50a6cb){logger[_0x16fdd1(0x1de)](_0x16fdd1(0x22a)+_0x50a6cb);}const _0x834690={};_0x834690[_0x16fdd1(0x1b9)]=_0x159a1a[_0x16fdd1(0x233)];const _0x361421={'headers':_0x834690,'body':_0x5e43cb,'auth':{'user':helper[_0x16fdd1(0x1fd)](_0x14718d),'pass':helper[_0x16fdd1(0x1ee)](_0x14718d)},'json':!![]};logger['debug'](_0x16fdd1(0x1e3)+JSON[_0x16fdd1(0x1dd)](_0x361421[_0x16fdd1(0x20c)]));try{const _0x7999ea=await helper[_0x16fdd1(0x1f7)](_0x159a1a[_0x16fdd1(0x22b)],constants[_0x16fdd1(0x213)],_0x361421,_0x14718d);logger['debug'](_0x16fdd1(0x1c7)+_0x126f96+_0x16fdd1(0x219)+util[_0x16fdd1(0x21e)]('%j',_0x7999ea));}catch(_0x9f6de0){logger[_0x16fdd1(0x1de)]('Error\x20in\x20firing\x20request\x20to\x20'+FUNNEL_INSTRUMENTATION_API_URL+_0x16fdd1(0x1f4)+util['format'](_0x9f6de0));}},exports[a90_0x2e96eb(0x224)]=async _0x2ae7f3=>{const _0x5d50b2=a90_0x2e96eb,_0x55e7ff={'YVulK':function(_0x522eff){return _0x522eff();},'VrSHw':function(_0x52590a,_0x1b8b6b){return _0x52590a>_0x1b8b6b;},'HJeGB':function(_0x2cf166,_0x1c47be){return _0x2cf166>_0x1c47be;},'KNtUU':_0x5d50b2(0x201),'eNoCp':'user_killed','rZuuR':function(_0xb5aaeb,_0x5d6a57){return _0xb5aaeb(_0x5d6a57);},'cTcGp':_0x5d50b2(0x1d2),'BteeR':function(_0x13eacc,_0x29de98,_0x25efa1){return _0x13eacc(_0x29de98,_0x25efa1);},'lqoJU':function(_0xca78af,_0xf400d){return _0xca78af+_0xf400d;},'GObqR':_0x5d50b2(0x1e6)};try{await _0x2ae7f3[_0x5d50b2(0x200)](),_0x55e7ff[_0x5d50b2(0x1c9)](printNudgeLocalNotSetError);const _0x190fd9={};_0x190fd9[_0x5d50b2(0x218)]=_0x2ae7f3['errorMessage']?_0x2ae7f3['errorMessage']:'{}';const _0x168bfe=_0x190fd9,_0x32645c=Object[_0x5d50b2(0x210)]({},_0x168bfe);if(PerformanceTester['isEnabled']()){const {measures:_0x39b7a0,errors:_0x3725ce}=PerformanceTester['finalize']();if(_0x39b7a0&&_0x55e7ff['VrSHw'](_0x39b7a0['length'],0x0)||_0x3725ce&&_0x55e7ff[_0x5d50b2(0x20b)](_0x3725ce[_0x5d50b2(0x1f5)],0x0)){const _0x31a9a5={};_0x31a9a5[_0x5d50b2(0x1c8)]=_0x39b7a0,_0x31a9a5[_0x5d50b2(0x1d9)]=_0x3725ce,Object[_0x5d50b2(0x210)](_0x32645c,_0x31a9a5);}}!!_0x2ae7f3[_0x5d50b2(0x1d4)]&&(_0x32645c[_0x55e7ff[_0x5d50b2(0x21a)]]={'reason':_0x55e7ff[_0x5d50b2(0x1fa)],'signal':_0x2ae7f3[_0x5d50b2(0x1d4)]});unhandledErrors=_0x2ae7f3['unhandledErrors'][_0x5d50b2(0x1db)]('\x0a');let _0x3599ec,_0x32f4e6,_0x1d205d;_0x55e7ff['rZuuR'](isTurboScaleSession,_0x2ae7f3['config'])?([_0x3599ec,_0x32f4e6]=await helper[_0x5d50b2(0x1b8)](_0x2ae7f3[_0x5d50b2(0x20e)]),[_0x1d205d]=await Promise[_0x5d50b2(0x22e)]([helper[_0x5d50b2(0x228)](_0x3599ec,_0x2ae7f3[_0x5d50b2(0x20e)]),exports[_0x5d50b2(0x1cc)](_0x55e7ff['cTcGp'],_0x32645c,_0x2ae7f3['config'],_0x2ae7f3['framework'])])):([_0x3599ec,_0x32f4e6]=await helper[_0x5d50b2(0x1e0)](_0x2ae7f3[_0x5d50b2(0x20e)]),[_0x1d205d]=await Promise['all']([helper[_0x5d50b2(0x232)](_0x3599ec,_0x2ae7f3[_0x5d50b2(0x20e)]),exports[_0x5d50b2(0x1cc)](_0x55e7ff[_0x5d50b2(0x1c2)],_0x32645c,_0x2ae7f3['config'],_0x2ae7f3[_0x5d50b2(0x20f)])])),_0x1d205d&&await _0x55e7ff['BteeR'](generateCIArtifacts,_0x1d205d,_0x32f4e6),await helper['sendLogs'](_0x2ae7f3['config']);}catch(_0x291f00){logger['debug'](_0x55e7ff['lqoJU'](_0x55e7ff[_0x5d50b2(0x1f2)],_0x291f00));}helper[_0x5d50b2(0x21f)]();};