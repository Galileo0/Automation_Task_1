#!/usr/bin/env node
'use strict';function a33_0x521b(){const _0x26a81d=['fpqjs','262xRkOVU','length','CBIJf','nightwatch.cmd','ordaZ','debug','test_settings','trim','Adding\x20browserstack\x20configs\x20to\x20run\x20tests\x20on\x20BrowserStack','now','BGjxd','config','unlinkSync','close','writeFileSync','useW3C','test','mergeDeep','winstonLogger','exports','inherit','port','host','29907UYbswF','nightwatch','slice','selenium','sTFvY','--env','FRCWF','wFaxw','EyasT','110iJrAVF','tKQCl','kchrX','673508gGNnGG','16WRPKbF','../utils/constants','push','env','info','join','findIndex','413950bWTqXA','hub.browserstack.com','nightwatch-browserstack.json','18fcscqZ','ZWUdK','27267qpRZcX','vFwli','mxMMj','start_process','yERMI','1911413HMvQWo','../../helpers/BrowserStackSetup','splice','yyFwz','isUndefined','nightwatch.json','gCwOm','forEach','stringify','modifyBrowserStackW3CCaps','../../helpers/logger','1031700XeWcio','child\x20process\x20exited\x20with\x20code\x20','344siEEtU','503329FenmPx','cwd','platforms','--config','desiredCapabilities','existsSync'];a33_0x521b=function(){return _0x26a81d;};return a33_0x521b();}const a33_0x3e1e37=a33_0x68fe;(function(_0x187fd3,_0x4c07e6){const _0x2c7a16=a33_0x68fe,_0x4d9500=_0x187fd3();while(!![]){try{const _0x18ebf5=-parseInt(_0x2c7a16(0xd9))/0x1+-parseInt(_0x2c7a16(0xe0))/0x2*(-parseInt(_0x2c7a16(0xc6))/0x3)+-parseInt(_0x2c7a16(0xba))/0x4*(-parseInt(_0x2c7a16(0xc1))/0x5)+-parseInt(_0x2c7a16(0xc4))/0x6*(parseInt(_0x2c7a16(0xcb))/0x7)+-parseInt(_0x2c7a16(0xd8))/0x8*(-parseInt(_0x2c7a16(0xad))/0x9)+-parseInt(_0x2c7a16(0xb6))/0xa*(-parseInt(_0x2c7a16(0xb9))/0xb)+-parseInt(_0x2c7a16(0xd6))/0xc;if(_0x18ebf5===_0x4c07e6)break;else _0x4d9500['push'](_0x4d9500['shift']());}catch(_0x279513){_0x4d9500['push'](_0x4d9500['shift']());}}}(a33_0x521b,0xe2fc7));const fs=require('fs'),path=require('path'),{spawn}=require('child_process'),logger=require(a33_0x3e1e37(0xd5))[a33_0x3e1e37(0xa8)],{default:BrowserStackSetup}=require(a33_0x3e1e37(0xcc)),helper=require('../../helpers/helper'),constants=require(a33_0x3e1e37(0xbb)),getUserNightwatchConfigs=(_0xd0b100,_0x13c831)=>{const _0xb34421=a33_0x3e1e37,_0x4f1a60={'wFaxw':'nightwatch.conf.js','ZWUdK':_0xb34421(0xd0),'pnBJS':function(_0xcb6792,_0x2830dc){return _0xcb6792(_0x2830dc);},'XptMX':'Couldn\x27t\x20find\x20any\x20config\x20file.\x20Generating\x20new\x20config\x20file'};let _0x3c83f2=null,_0x56b55e={};const _0x230a9f=_0x13c831[_0xb34421(0xc0)](_0x66de86=>_0x66de86===_0xb34421(0xdc));if(!helper[_0xb34421(0xcf)](_0xd0b100['config'])&&fs['existsSync'](path[_0xb34421(0xbf)](process[_0xb34421(0xda)](),_0xd0b100[_0xb34421(0xeb)])))_0x3c83f2=path[_0xb34421(0xbf)](process[_0xb34421(0xda)](),_0xd0b100['config']),_0x13c831[_0xb34421(0xcd)](_0x230a9f,0x2);else{if(fs[_0xb34421(0xde)](path[_0xb34421(0xbf)](process[_0xb34421(0xda)](),_0x4f1a60['wFaxw'])))_0x3c83f2=path['join'](process[_0xb34421(0xda)](),_0x4f1a60[_0xb34421(0xb4)]);else fs[_0xb34421(0xde)](path[_0xb34421(0xbf)](process[_0xb34421(0xda)](),_0x4f1a60['ZWUdK']))&&(_0x3c83f2=path[_0xb34421(0xbf)](process['cwd'](),_0x4f1a60[_0xb34421(0xc5)]));}return _0x3c83f2?(logger[_0xb34421(0xbe)]('Getting\x20your\x20nightwatch\x20configs\x20from\x20'+_0x3c83f2),_0x56b55e=_0x4f1a60['pnBJS'](require,_0x3c83f2)):logger[_0xb34421(0xbe)](_0x4f1a60['XptMX']),_0x56b55e;},removeExistingEnvs=_0x4bf465=>{const _0x313225=a33_0x3e1e37,_0x1707a5={};_0x1707a5['vFwli']=function(_0xefef8e,_0x173062){return _0xefef8e>_0x173062;};const _0x2f09bc=_0x1707a5;let _0x4af82a=_0x4bf465[_0x313225(0xc0)](_0x4a1f57=>_0x4a1f57===_0x313225(0xb2));_0x2f09bc[_0x313225(0xc7)](_0x4af82a,-0x1)&&_0x4bf465[_0x313225(0xcd)](_0x4af82a,0x2),_0x4af82a=_0x4bf465[_0x313225(0xc0)](_0x2b4835=>_0x2b4835==='-e'),_0x2f09bc[_0x313225(0xc7)](_0x4af82a,-0x1)&&_0x4bf465[_0x313225(0xcd)](_0x4af82a,0x2);};function a33_0x68fe(_0x50e06c,_0x16a4ef){const _0x521bbd=a33_0x521b();return a33_0x68fe=function(_0x68fe61,_0x215f00){_0x68fe61=_0x68fe61-0xa6;let _0x2cbb34=_0x521bbd[_0x68fe61];return _0x2cbb34;},a33_0x68fe(_0x50e06c,_0x16a4ef);}function run(_0xb9938c,_0x2716d8){const _0x14b752=a33_0x3e1e37,_0x39005c={'ordaZ':_0x14b752(0xae),'CBIJf':function(_0x1fbd8b,_0xf5c221){return _0x1fbd8b+_0xf5c221;},'kchrX':_0x14b752(0xe6),'mxMMj':function(_0x23025f,_0x2f8291,_0x31b299){return _0x23025f(_0x2f8291,_0x31b299);},'uIXmZ':_0x14b752(0xc2),'YtElw':_0x14b752(0xe8),'fpqjs':function(_0x840b55,_0x392248){return _0x840b55===_0x392248;},'sTFvY':_0x14b752(0xc3),'WTvJO':function(_0xbd3a28,_0x4c29d8){return _0xbd3a28(_0x4c29d8);},'tKQCl':function(_0x347b4e,_0x280bc0,_0x404eba,_0x2752d3){return _0x347b4e(_0x280bc0,_0x404eba,_0x2752d3);},'EyasT':_0x14b752(0xe3),'yyFwz':'--config','gCwOm':_0x14b752(0xb2),'ChhZN':_0x14b752(0xaa),'yERMI':_0x14b752(0xed)},_0x443ec1=new BrowserStackSetup(_0xb9938c);if(!_0x443ec1[_0x14b752(0xeb)])return;const _0x19b634=_0x39005c[_0x14b752(0xc8)](getUserNightwatchConfigs,_0xb9938c,_0x2716d8),_0x4178a3={};_0x4178a3[_0x14b752(0xc9)]=![];const _0x7a84b4={};_0x7a84b4[_0x14b752(0xac)]=_0x39005c['uIXmZ'],_0x7a84b4[_0x14b752(0xab)]=0x1bb;const _0x46aa47={};_0x46aa47['webdriver']=_0x4178a3,_0x46aa47[_0x14b752(0xb0)]=_0x7a84b4;const _0x462fb4=_0x46aa47;logger[_0x14b752(0xbe)](_0x39005c['YtElw']);const _0x3af107={..._0x19b634},_0x342d84=_0x3af107,_0x4452d4=helper[_0x14b752(0xef)](_0x443ec1[_0x14b752(0xeb)]),_0x45ba36=[];_0x443ec1[_0x14b752(0xeb)][_0x14b752(0xdb)][_0x14b752(0xd2)]((_0x4f2ca0,_0x3c7968)=>{const _0xdf0c9a=_0x14b752;_0x4452d4?_0x45ba36['push'](helper[_0xdf0c9a(0xd4)](_0x443ec1['config'],_0x39005c[_0xdf0c9a(0xe4)],_0x3c7968)):_0x45ba36[_0xdf0c9a(0xbc)](helper['modifyBrowserStackCaps'](_0x443ec1['config'],_0x39005c[_0xdf0c9a(0xe4)],_0x3c7968));});const _0x4f0080={},_0x1ea05b=[];_0xb9938c[_0x14b752(0xbd)]=_0xb9938c[_0x14b752(0xbd)]||_0xb9938c['e'];const _0x25ed7a=_0xb9938c[_0x14b752(0xbd)]?_0xb9938c[_0x14b752(0xbd)]['trim']()['split'](',')['map'](_0x2d5584=>_0x2d5584[_0x14b752(0xe7)]())['filter'](_0x205ae3=>_0x205ae3!==''):[''];_0x39005c[_0x14b752(0xdf)](_0x25ed7a[_0x14b752(0xe1)],0x0)&&_0x25ed7a[_0x14b752(0xbc)]('');_0x25ed7a[_0x14b752(0xd2)](_0x3d936d=>{const _0x502988=_0x14b752,_0x59a735={'BGjxd':function(_0x812b58,_0x53b440){const _0x3e720a=a33_0x68fe;return _0x39005c[_0x3e720a(0xe2)](_0x812b58,_0x53b440);},'FRCWF':_0x39005c[_0x502988(0xb8)]};_0x45ba36[_0x502988(0xd2)](_0x217bb2=>{const _0x3fa815=_0x502988;let _0x1c9bc2=_0x59a735[_0x3fa815(0xea)](helper['getPlatformName'](_0x217bb2,'_'),'_'+Date[_0x3fa815(0xe9)]());_0x3d936d&&(_0x1c9bc2+='_'+_0x3d936d);if(_0x3d936d&&(!_0x19b634[_0x59a735[_0x3fa815(0xb3)]]||!_0x19b634[_0x59a735['FRCWF']][_0x3d936d]))return;const _0x195b39={..._0x462fb4};_0x195b39[_0x3fa815(0xdd)]=_0x217bb2;const _0xd67174=_0x195b39;_0x4f0080[_0x1c9bc2]=_0x3d936d?helper[_0x3fa815(0xa7)](_0x19b634[_0x59a735[_0x3fa815(0xb3)]][_0x3d936d],_0xd67174):_0xd67174,_0x1ea05b[_0x3fa815(0xbc)](_0x1c9bc2);});});!_0x342d84[_0x14b752(0xe6)]&&(_0x342d84['test_settings']={});_0x342d84[_0x14b752(0xe6)]={..._0x342d84[_0x14b752(0xe6)],..._0x4f0080};const _0x439cc1=path[_0x14b752(0xbf)](__dirname,_0x39005c[_0x14b752(0xb1)]);fs[_0x14b752(0xee)](_0x439cc1,JSON[_0x14b752(0xd3)](_0x342d84)),_0x39005c['WTvJO'](removeExistingEnvs,_0x2716d8);const _0x370cdc=_0x39005c[_0x14b752(0xb7)](spawn,/^win/[_0x14b752(0xa6)](process['platform'])?_0x39005c[_0x14b752(0xb5)]:_0x39005c[_0x14b752(0xe4)],[_0x39005c[_0x14b752(0xce)],_0x439cc1,..._0x2716d8[_0x14b752(0xaf)](0x1),_0x39005c[_0x14b752(0xd1)],_0x1ea05b['join'](',')],{'stdio':_0x39005c['ChhZN']});_0x370cdc['on'](_0x39005c[_0x14b752(0xca)],async _0x97831d=>{const _0xe7c404=_0x14b752;logger[_0xe7c404(0xe5)](_0xe7c404(0xd7)+_0x97831d),logger[_0xe7c404(0xbe)]('Deleting\x20'+_0x439cc1),fs[_0xe7c404(0xec)](_0x439cc1);});}module[a33_0x3e1e37(0xa9)]=run;