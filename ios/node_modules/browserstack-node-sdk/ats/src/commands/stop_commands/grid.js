function a19_0x1948(_0x13bf8b,_0x59396a){const _0x42bf6d=a19_0x42bf();return a19_0x1948=function(_0x19485f,_0x5c5643){_0x19485f=_0x19485f-0x109;let _0x3f75df=_0x42bf6d[_0x19485f];return _0x3f75df;},a19_0x1948(_0x13bf8b,_0x59396a);}const a19_0x31840a=a19_0x1948;(function(_0x8e26d2,_0x3a30f3){const _0x3cf743=a19_0x1948,_0x579958=_0x8e26d2();while(!![]){try{const _0x227d24=-parseInt(_0x3cf743(0x15c))/0x1+parseInt(_0x3cf743(0x115))/0x2*(parseInt(_0x3cf743(0x132))/0x3)+-parseInt(_0x3cf743(0x136))/0x4+parseInt(_0x3cf743(0x12b))/0x5*(-parseInt(_0x3cf743(0x162))/0x6)+-parseInt(_0x3cf743(0x147))/0x7*(-parseInt(_0x3cf743(0x125))/0x8)+parseInt(_0x3cf743(0x11e))/0x9+parseInt(_0x3cf743(0x138))/0xa;if(_0x227d24===_0x3a30f3)break;else _0x579958['push'](_0x579958['shift']());}catch(_0x5b0baa){_0x579958['push'](_0x579958['shift']());}}}(a19_0x42bf,0x7f1e4));const fs=require('fs'),ws=require('ws'),ReconnectingWebSocket=require(a19_0x31840a(0x145)),{global_registry,HELP_HEADER_MESSAGE,HELP_FOOTER_MESSAGE,WS_ENDPOINT,messageTypes}=require('../../config/constants'),{logger}=require(a19_0x31840a(0x11a)),{getCredentialsPath,getGridDetails}=require(a19_0x31840a(0x150)),{scaleDownHubDeployment}=require('../../utils/gridComponents'),{sendInstrumentationEvent}=require(a19_0x31840a(0x13d)),webSocketUtils=require(a19_0x31840a(0x149)),{createK8sClient}=require(a19_0x31840a(0x11d)),{getCloudProviderObject}=require(a19_0x31840a(0x12a));exports[a19_0x31840a(0x12c)]=a19_0x31840a(0x117),exports[a19_0x31840a(0x161)]=a19_0x31840a(0x164),exports['builder']=function(_0x9e2b87){const _0x5be546=a19_0x31840a,_0x41b2fe={};_0x41b2fe[_0x5be546(0x121)]=_0x5be546(0x13a),_0x41b2fe[_0x5be546(0x114)]='string',_0x41b2fe[_0x5be546(0x14f)]=_0x5be546(0x10f),_0x41b2fe[_0x5be546(0x15d)]=_0x5be546(0x129),_0x41b2fe[_0x5be546(0x13e)]='help';const _0x5b84ad=_0x41b2fe,_0x128ae3={};_0x128ae3[_0x5be546(0x142)]=_0x5b84ad['oOaDf'],_0x128ae3[_0x5be546(0x123)]=_0x5b84ad['ISSZy'];const _0x376acd={};_0x376acd[_0x5be546(0x142)]=_0x5b84ad[_0x5be546(0x14f)],_0x376acd[_0x5be546(0x123)]=_0x5b84ad[_0x5be546(0x15d)],_0x376acd[_0x5be546(0x13c)]=![];const _0x4fdebb={};return _0x4fdebb[_0x5be546(0x118)]=_0x128ae3,_0x4fdebb[_0x5be546(0x12f)]=_0x376acd,_0x9e2b87[_0x5be546(0x14b)](HELP_HEADER_MESSAGE[_0x5be546(0x10d)])[_0x5be546(0x13b)](HELP_FOOTER_MESSAGE)[_0x5be546(0x111)](_0x4fdebb)[_0x5be546(0x160)](_0x5b84ad[_0x5be546(0x13e)])[_0x5be546(0x119)];},exports['handler']=async function(_0x38d747){const _0x1473d6=a19_0x31840a,_0x49d64f={'PMLAX':_0x1473d6(0x155),'eLncR':function(_0x559be1){return _0x559be1();},'IwQOb':'Credentials\x20not\x20found!\x20Ensure\x20init\x20command\x20is\x20run\x20before\x20running\x20this\x20command.','hBHSv':function(_0x1ed8b9,_0xd15e50,_0x3dc732,_0x326442,_0x55ce32,_0x27ddde,_0x272bdc){return _0x1ed8b9(_0xd15e50,_0x3dc732,_0x326442,_0x55ce32,_0x27ddde,_0x272bdc);},'IQSOj':'stop-grid-called','rqNMK':_0x1473d6(0x141),'rfoVK':function(_0x16bcaa,_0x29af59,_0x135316,_0x4c9bc0,_0x3ee196,_0x1e736c,_0x3c35e5){return _0x16bcaa(_0x29af59,_0x135316,_0x4c9bc0,_0x3ee196,_0x1e736c,_0x3c35e5);},'ysSNX':_0x1473d6(0x133),'cNKRC':_0x1473d6(0x112),'bLRYr':_0x1473d6(0x109),'Aadhz':function(_0x350398,_0x13bee1,_0x4a1fac,_0x161a76){return _0x350398(_0x13bee1,_0x4a1fac,_0x161a76);},'ZSmBE':function(_0x42296b,_0x3e1040,_0x493ebc,_0x143fc1,_0x8849e4,_0x2b0f29,_0x4cf4e6){return _0x42296b(_0x3e1040,_0x493ebc,_0x143fc1,_0x8849e4,_0x2b0f29,_0x4cf4e6);},'GBdtX':function(_0x9cb2cb,_0x51fe0d,_0x67d799){return _0x9cb2cb(_0x51fe0d,_0x67d799);},'TjWWF':'Grid\x20stoppped.','ongVR':function(_0x252569,_0x5c49d2){return _0x252569===_0x5c49d2;},'qwZYQ':'Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Unauthorized\x20request!','FvNuA':_0x1473d6(0x13f),'iTnJJ':function(_0x1f4d6f,_0x192717){return _0x1f4d6f===_0x192717;},'PNYXU':function(_0x535470,_0x1f28c2,_0x5dcfc7,_0x44af7a,_0x491102,_0x59693c,_0x4c8184){return _0x535470(_0x1f28c2,_0x5dcfc7,_0x44af7a,_0x491102,_0x59693c,_0x4c8184);},'ziNSU':'invalid-grid-id','mFHER':'server-error'};let _0x1b1c89;try{!_0x38d747[_0x1473d6(0x122)]&&(logger[_0x1473d6(0x144)](_0x49d64f[_0x1473d6(0x158)]),process[_0x1473d6(0x130)](0x1));!fs[_0x1473d6(0x153)](_0x49d64f[_0x1473d6(0x137)](getCredentialsPath))&&(logger[_0x1473d6(0x144)](_0x49d64f[_0x1473d6(0x14e)]),await _0x49d64f[_0x1473d6(0x14a)](sendInstrumentationEvent,_0x38d747,_0x49d64f['IQSOj'],messageTypes[_0x1473d6(0x134)],_0x49d64f[_0x1473d6(0x15a)],null,_0x38d747),process['exit'](0x1));logger[_0x1473d6(0x143)](_0x1473d6(0x154)+_0x38d747['gridId']),await _0x49d64f[_0x1473d6(0x124)](sendInstrumentationEvent,_0x38d747,_0x49d64f['IQSOj'],messageTypes[_0x1473d6(0x126)],null,null,_0x38d747);const _0x168316=JSON[_0x1473d6(0x140)](fs[_0x1473d6(0x14d)](_0x49d64f[_0x1473d6(0x137)](getCredentialsPath)));global_registry[_0x1473d6(0x110)]=_0x168316['Browserstack'][_0x1473d6(0x157)],global_registry['bstackAccesskey']=_0x168316[_0x1473d6(0x127)][_0x1473d6(0x10b)];const _0x1477ca=WS_ENDPOINT[_0x1473d6(0x128)](_0x49d64f[_0x1473d6(0x120)],_0x168316[_0x1473d6(0x127)][_0x1473d6(0x157)])[_0x1473d6(0x128)](_0x49d64f[_0x1473d6(0x12e)],_0x168316[_0x1473d6(0x127)][_0x1473d6(0x10b)]),_0x5321ab={};_0x5321ab[_0x1473d6(0x10c)]=ws,_0x5321ab[_0x1473d6(0x163)]=0x36ee80,_0x1b1c89=new ReconnectingWebSocket(_0x1477ca,[],_0x5321ab),logger['debug'](_0x49d64f['bLRYr']),webSocketUtils[_0x1473d6(0x11c)](_0x1b1c89,_0x38d747[_0x1473d6(0x159)],_0x38d747[_0x1473d6(0x10b)]);const [_0x5f4246,_0x10f3d3]=await _0x49d64f[_0x1473d6(0x156)](getGridDetails,_0x168316['Browserstack'][_0x1473d6(0x157)],_0x168316[_0x1473d6(0x127)][_0x1473d6(0x10b)],_0x38d747['gridId']);if(_0x10f3d3){const _0x33cbe0=_0x10f3d3[_0x1473d6(0x143)];global_registry[_0x1473d6(0x131)]=_0x33cbe0[_0x1473d6(0x131)],global_registry['clusterRegion']=_0x33cbe0[_0x1473d6(0x116)],global_registry[_0x1473d6(0x12d)]=_0x33cbe0[_0x1473d6(0x12d)];const _0x554798=await _0x49d64f[_0x1473d6(0x151)](getCloudProviderObject,_0x33cbe0[_0x1473d6(0x131)],_0x33cbe0['clusterName'],_0x33cbe0[_0x1473d6(0x10a)],_0x1b1c89,webSocketUtils,_0x38d747),[_0x192d66,_0x2b000f,_0x1781e8,_0x902108,_0x5a882f,_0xe58272]=await _0x49d64f['GBdtX'](createK8sClient,_0x554798,_0x38d747[_0x1473d6(0x10e)]);await _0x49d64f[_0x1473d6(0x113)](scaleDownHubDeployment,_0x2b000f,_0x33cbe0[_0x1473d6(0x10a)]),logger['info'](_0x49d64f[_0x1473d6(0x15b)]),process['exit'](0x0);}_0x49d64f[_0x1473d6(0x152)](_0x5f4246[_0x1473d6(0x14c)],0x191)&&(logger[_0x1473d6(0x144)](_0x49d64f['qwZYQ']),await _0x49d64f[_0x1473d6(0x151)](sendInstrumentationEvent,_0x38d747,_0x49d64f[_0x1473d6(0x148)],messageTypes[_0x1473d6(0x134)],_0x49d64f['FvNuA'],null,_0x38d747),process['exit'](0x1)),_0x49d64f[_0x1473d6(0x15f)](_0x5f4246[_0x1473d6(0x14c)],0x190)&&(logger[_0x1473d6(0x144)](JSON[_0x1473d6(0x140)](_0x5f4246[_0x1473d6(0x135)])['message']),await _0x49d64f[_0x1473d6(0x11f)](sendInstrumentationEvent,_0x38d747,_0x49d64f['IQSOj'],messageTypes[_0x1473d6(0x134)],_0x49d64f[_0x1473d6(0x139)],null,_0x38d747),process[_0x1473d6(0x130)](0x1)),logger['error'](_0x1473d6(0x15e)+JSON[_0x1473d6(0x11b)](_0x5f4246)),await _0x49d64f[_0x1473d6(0x11f)](sendInstrumentationEvent,_0x38d747,_0x49d64f['IQSOj'],messageTypes[_0x1473d6(0x134)],_0x49d64f[_0x1473d6(0x146)],_0x5f4246,_0x38d747),process['exit'](0x1);}catch(_0x53a575){const _0x36cd45='Unable\x20to\x20stop\x20the\x20Grid!\x20Error:\x20'+_0x53a575+'\x20\x0a'+JSON['stringify'](_0x53a575[_0x1473d6(0x165)])+'\x20';logger[_0x1473d6(0x144)](_0x36cd45),process[_0x1473d6(0x130)](0x1);}};function a19_0x42bf(){const _0x17cac1=['init-not-called','description','info','error','reconnecting-websocket','mFHER','9387cdSKjl','IQSOj','../../utils/webSocketUtils','hBHSv','usage','statusCode','readFileSync','IwQOb','ZCldM','../../utils/utilityMethods','ZSmBE','ongVR','existsSync','Stopping\x20grid\x20','Please\x20provide\x20ID\x20of\x20the\x20grid\x20to\x20stop','Aadhz','username','PMLAX','user','rqNMK','TjWWF','950040VuMHbQ','RGeRS','Failed\x20to\x20fetch\x20grid\x20details\x20from\x20the\x20server.\x20Response\x20from\x20server:\x20','iTnJJ','help','desc','580422pkqtWp','connectionTimeout','Stop\x20a\x20running\x20Automation\x20grid.','stack','Adding\x20Websocket\x20listeners','name','password','WebSocket','stop','skipTlsCertVerify','Skip\x20insecure\x20cert\x20verification.','bstackUsername','options','<PasswordPlaceholder>','GBdtX','ISSZy','2TyiPas','region','grid','grid-id','argv','../../config/logger','stringify','addListeners','../../utils/createk8sClient','2740509jyuBbK','PNYXU','ysSNX','oOaDf','gridId','type','rfoVK','2536LiVSss','INFO','Browserstack','replace','boolean','../../cloudproviders/utils','45gCtwtv','command','clusterName','cNKRC','skip-tls-cert-verify','exit','cloudProvider','1328259gOYQdC','<UsernamePlaceholder>','ERROR','body','48336AriKKE','eLncR','11810820KqxAzU','ziNSU','Pass\x20the\x20ID\x20of\x20the\x20running\x20Automation\x20grid\x20you\x20want\x20to\x20stop.','epilogue','default','../../utils/instrumentationUtils','Vdwes','unauthorised','parse'];a19_0x42bf=function(){return _0x17cac1;};return a19_0x42bf();}